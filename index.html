<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuizMaster - Test Your Knowledge</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        /* iframe containing your dragon files sits full-screen behind content */
        #dragon-frame {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: -1;
            pointer-events: none;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            padding: 40px;
            margin: 40px auto;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }

        .header { text-align: center; margin-bottom: 30px; }
        .logo { background: linear-gradient(45deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2.5rem; font-weight: bold; margin-bottom: 10px; }
        .subtitle { color: #666; font-size: 1.1rem; }

        .quiz-section { display: none; }
        .quiz-section.active { display: block; animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .question-counter { text-align: center; margin-bottom: 20px; color: #666; font-size: 0.9rem; }
        .progress-bar { height: 6px; background: #e0e0e0; border-radius: 3px; margin-bottom: 30px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(45deg, #667eea, #764ba2); width: 0%; transition: width 0.3s ease; }

        .question { background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 25px; border-left: 5px solid #667eea; }
        .question h3 { color: #333; font-size: 1.3rem; line-height: 1.5; margin-bottom: 20px; }

        .options { display: grid; gap: 12px; }
        .option { background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 15px 20px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }
        .option:hover { border-color: #667eea; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102,126,234,0.2); }
        .option.correct { border-color: #4CAF50; background: linear-gradient(45deg, rgba(76,175,80,0.1), rgba(76,175,80,0.2)); }
        .option.incorrect { border-color: #f44336; background: linear-gradient(45deg, rgba(244,67,54,0.1), rgba(244,67,54,0.2)); }

        .feedback { margin: 20px 0; padding: 15px; border-radius: 10px; text-align: center; font-weight: bold; display: none; }
        .feedback.correct { background: rgba(76,175,80,0.1); color: #4CAF50; border: 2px solid #4CAF50; }
        .feedback.incorrect { background: rgba(244,67,54,0.1); color: #f44336; border: 2px solid #f44336; }

        .buttons { text-align: center; margin-top: 30px; }
        .btn { background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; padding: 15px 30px; border-radius: 50px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: all 0.3s ease; margin: 0 10px; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }

        .start-screen { text-align:center; }
        .results-screen { text-align:center; }

        .leaderboard {
            text-align: left;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            background: #fff;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid rgba(0,0,0,0.06);
        }
        .leaderboard h4 { margin-bottom: 8px; }
        .leaderboard-item { display:flex; justify-content:space-between; padding:6px 0; border-bottom: 1px dashed rgba(0,0,0,0.04); }
        .leaderboard-item:last-child { border-bottom: none; }

        @media (max-width: 600px) {
            .container { padding: 20px; margin: 20px; }
        }
    </style>
</head>
<body>

  <iframe id="dragon-frame" src="dragon.html" title="Animated background"></iframe>

  <div class="container">
      <div class="header">
          <div class="logo">🧠 QuizMaster</div>
          <div class="subtitle">Test Your Knowledge</div>
      </div>

      <div id="start-screen" class="quiz-section active start-screen">
          <h2>Welcome to QuizMaster!</h2>
          <p>Test your knowledge with our interactive quiz. You'll get immediate feedback on each question and see your final score at the end.</p>
          <div class="buttons">
              <button class="btn" id="start-btn">Start Quiz</button>
          </div>

          <div class="leaderboard" id="leaderboard-start">
            <h4>Leaderboard</h4>
            <div id="leaderboard-list-start">No entries yet</div>
          </div>
      </div>

      <div id="quiz-screen" class="quiz-section">
          <div class="question-counter">
              <span id="current-question">1</span> of <span id="total-questions">10</span>
          </div>
          
          <div class="progress-bar">
              <div class="progress-fill" id="progress-fill"></div>
          </div>

          <div class="question">
              <h3 id="question-text"></h3>
              <div class="options" id="options-container"></div>
          </div>

          <div class="feedback" id="feedback"></div>

          <div class="buttons">
              <button class="btn" id="next-btn" disabled>Next Question</button>
          </div>
      </div>

      <div id="results-screen" class="quiz-section results-screen">
          <h2>Quiz Complete!</h2>
          
          <div class="score-circle" id="score-circle">
              <div id="score-percentage">0%</div>
              <div class="score-text">Score</div>
          </div>

          <div class="results-message" id="results-message"></div>

          <div class="results-breakdown">
              <div class="breakdown-item">
                  <span>Correct Answers:</span>
                  <strong id="correct-count">0</strong>
              </div>
              <div class="breakdown-item">
                  <span>Incorrect Answers:</span>
                  <strong id="incorrect-count">0</strong>
              </div>
              <div class="breakdown-item">
                  <span>Total Questions:</span>
                  <strong id="total-count">0</strong>
              </div>
          </div>

          <div class="buttons">
              <button class="btn" id="save-score-btn">Save Score</button>
              <button class="btn" id="play-again-btn">Take Quiz Again</button>
          </div>

          <div class="leaderboard" id="leaderboard-results">
            <h4>Leaderboard</h4>
            <div id="leaderboard-list-results">No entries yet</div>
          </div>
      </div>
  </div>

  <script>
    (function(){
      const ORIGINAL_QUIZ = [
        {
          question: "According to Youmio’s tweet, approximately how many wearable SBTs have been minted and mentioned as listed on OpenSea?",
          options: ["~6,500", "~65,000", "~650,000", "~65"],
          correct: 1,
        },
        {
          question: "In the Youmio announcement, the project said its ecosystem will be ‘living on its own L1’ in partnership with which network?",
          options: ["Ethereum", "Solana", "Avalanche (AVAX)", "Polygon"],
          correct: 2,
        },
        {
          question: "What does ‘L1’ most commonly refer to in blockchain terminology (as used in the Youmio announcement)?",
          options: [
            "A second-layer scaling solution",
            "A Layer-1 blockchain (base/mainchain)",
            "A token standards committee",
            "A decentralized exchange (DEX)",
          ],
          correct: 1,
        },
        {
          question: "What is OpenSea in the context of Youmio’s tweet about wearable SBTs?",
          options: [
            "A hardware wallet brand",
            "An NFT marketplace where digital assets like wearables can be listed and viewed",
            "A Layer-1 blockchain",
            "A decentralized identity protocol",
          ],
          correct: 1,
        },
        {
          question: "Youmio mentioned a ‘Mint to Chain’ style utility in their posts. Which of the following best describes ‘mint-to-chain’?",
          options: [
            "Sending NFTs from one chain to another automatically",
            "Minting an asset (NFT/SBT) directly on a blockchain so the token exists on-chain immediately",
            "A swap between tokens across DEXs",
            "Off-chain storage of metadata only",
          ],
          correct: 1,
        },
        {
          question: "Which Youmio milestone was explicitly mentioned in their posts as a measure of early network activity?",
          options: [
            "10,000 wallets created",
            "Closed Testnet crossed 500k transactions",
            "1 million active users",
            "Mainnet launch on Ethereum",
          ],
          correct: 1,
        },
        {
          question: "What kind of reward mechanic did Youmio reference as part of their L1 ecosystem (useful for community/utility)?",
          options: [
            "Proof-of-Work mining rewards",
            "‘Affinity’ rewards mechanics tied to utility and 3D assets",
            "Only simple airdrops with no utility",
            "Yield farming for stablecoins",
          ],
          correct: 1,
        },
        {
          question: "If a user wants to view Youmio’s wearable SBT listings as referenced in the tweet, what’s the most direct place to check?",
          options: [
            "A centralized exchange order book",
            "The OpenSea marketplace listing for the project",
            "An email newsletter archive",
            "A private Discord DM only",
          ],
          correct: 1,
        },
        {
          question: "Why would a project choose to run its own L1 (as Youmio announced) instead of staying entirely on another chain? (Best single answer)",
          options: [
            "To avoid needing any validators or nodes",
            "To have custom consensus, lower fees, and tighter control over protocol features and economics",
            "To become fully centralized under one company",
            "To eliminate the need for wallets",
          ],
          correct: 1,
        },
        {
          question: "Which claim below best matches Youmio’s public positioning from the analysed tweets?",
          options: [
            "Youmio is primarily a hardware wallet company.",
            "Youmio is building an on-chain AI/3D agent ecosystem with NFTs/SBT utilities, launching L1 infrastructure (partnering with AVAX) and achieving testnet growth.",
            "Youmio is only a social media marketing agency.",
            "Youmio is shutting down operations.",
          ],
          correct: 1,
        },
      ];

      function shuffleArray(arr){
        const a = arr.slice();
        for(let i=a.length-1;i>0;i--){
          const j = Math.floor(Math.random()*(i+1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      function deepCloneQuestions(src){
        return src.map(q => ({ question: q.question, options: q.options.slice(), correct: q.correct }));
      }

      function shuffleQuestionsAndOptions(source){
        // clone
        const qcopy = deepCloneQuestions(source);
        // shuffle options inside each question and update correct index
        const transformed = qcopy.map(q=>{
          const optObjs = q.options.map((o, idx)=> ({ text: o, idx }));
          const shuffled = shuffleArray(optObjs);
          const newCorrect = shuffled.findIndex(o=>o.idx===q.correct);
          return { question: q.question, options: shuffled.map(x=>x.text), correct: newCorrect };
        });
        return shuffleArray(transformed);
      }

      // state
      let quizData = shuffleQuestionsAndOptions(ORIGINAL_QUIZ);
      let currentQuestion = 0;
      let score = 0;
      let selectedOption = -1;

      // DOM refs
      const startScreen = document.getElementById('start-screen');
      const quizScreen = document.getElementById('quiz-screen');
      const resultsScreen = document.getElementById('results-screen');
      const startBtn = document.getElementById('start-btn');
      const nextBtn = document.getElementById('next-btn');
      const optionsContainer = document.getElementById('options-container');
      const questionText = document.getElementById('question-text');
      const currentQuestionEl = document.getElementById('current-question');
      const totalQuestionsEl = document.getElementById('total-questions');
      const progressFill = document.getElementById('progress-fill');
      const feedbackEl = document.getElementById('feedback');
      const scorePercentageEl = document.getElementById('score-percentage');
      const correctCountEl = document.getElementById('correct-count');
      const incorrectCountEl = document.getElementById('incorrect-count');
      const totalCountEl = document.getElementById('total-count');
      const resultsMessageEl = document.getElementById('results-message');
      const saveScoreBtn = document.getElementById('save-score-btn');
      const playAgainBtn = document.getElementById('play-again-btn');
      const leaderboardStart = document.getElementById('leaderboard-list-start');
      const leaderboardResults = document.getElementById('leaderboard-list-results');

      function renderLeaderboard(targetEl){
        try{
          const raw = localStorage.getItem('quiz_leaderboard_v1');
          const list = raw ? JSON.parse(raw) : [];
          if(list.length===0){
            targetEl.textContent = 'No entries yet';
            return;
          }
          targetEl.innerHTML = '';
          list.slice(0,50).forEach((e, i)=>{
            const div = document.createElement('div');
            div.className = 'leaderboard-item';
            div.innerHTML = `<span>${i+1}. ${escapeHtml(e.name)}</span><span>${e.score}/${e.total}</span>`;
            targetEl.appendChild(div);
          });
        }catch(err){
          targetEl.textContent = 'No entries yet';
        }
      }

      function saveToLeaderboard(name, scoreVal, total){
        try{
          const raw = localStorage.getItem('quiz_leaderboard_v1');
          const list = raw ? JSON.parse(raw) : [];
          list.push({ name: name || 'Anonymous', score: scoreVal, total: total, date: new Date().toISOString() });
          list.sort((a,b)=> {
            if(b.score === a.score) return new Date(b.date) - new Date(a.date);
            return b.score - a.score;
          });
          const trimmed = list.slice(0,100);
          localStorage.setItem('quiz_leaderboard_v1', JSON.stringify(trimmed));
        }catch(e){}
      }

      function escapeHtml(s){
        return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[c]);
      }

      function startQuiz(){
        quizData = shuffleQuestionsAndOptions(ORIGINAL_QUIZ);
        currentQuestion = 0;
        score = 0;
        selectedOption = -1;
        startScreen.classList.remove('active');
        resultsScreen.classList.remove('active');
        quizScreen.classList.add('active');
        totalQuestionsEl.textContent = quizData.length;
        loadQuestion();
      }

      function loadQuestion(){
        if(currentQuestion >= quizData.length){
          showResults();
          return;
        }
        const q = quizData[currentQuestion];
        currentQuestionEl.textContent = currentQuestion + 1;
        questionText.textContent = q.question;
        optionsContainer.innerHTML = '';
        q.options.forEach((opt, idx)=>{
          const el = document.createElement('div');
          el.className = 'option';
          el.textContent = opt;
          el.onclick = ()=> selectOption(idx);
          optionsContainer.appendChild(el);
        });
        const progress = ((currentQuestion) / quizData.length) * 100;
        progressFill.style.width = progress + '%';
        selectedOption = -1;
        nextBtn.disabled = true;
        feedbackEl.style.display = 'none';
        feedbackEl.className = 'feedback';
      }

      function selectOption(idx){
        if(selectedOption !== -1) return;
        selectedOption = idx;
        const q = quizData[currentQuestion];
        const optionEls = optionsContainer.querySelectorAll('.option');
        optionEls.forEach((el, i)=>{
          el.style.pointerEvents = 'none';
          if(i === q.correct) el.classList.add('correct');
          else if(i === selectedOption && i !== q.correct) el.classList.add('incorrect');
        });
        const feedback = feedbackEl;
        if(selectedOption === q.correct){
          score++;
          feedback.textContent = '🎉 Correct! Well done!';
          feedback.className = 'feedback correct';
        } else {
          feedback.textContent = `❌ Incorrect. The correct answer is: ${q.options[q.correct]}`;
          feedback.className = 'feedback incorrect';
        }
        feedback.style.display = 'block';
        nextBtn.disabled = false;
      }

      function nextQuestion(){
        currentQuestion++;
        setTimeout(loadQuestion, 240);
      }

      function showResults(){
        quizScreen.classList.remove('active');
        resultsScreen.classList.add('active');
        const percentage = Math.round((score / quizData.length) * 100);
        scorePercentageEl.textContent = percentage + '%';
        correctCountEl.textContent = score;
        incorrectCountEl.textContent = quizData.length - score;
        totalCountEl.textContent = quizData.length;
        let message = '';
        if(percentage >= 80) message = '🏆 Excellent! You\'re a quiz master!';
        else if(percentage >= 60) message = '👏 Good job! You did well!';
        else if(percentage >= 40) message = '👍 Not bad! Keep practicing!';
        else message = '💪 Don\'t give up! Try again!';
        resultsMessageEl.textContent = message;
        renderLeaderboard(leaderboardResults);
      }

      function restartQuiz(){
        // shuffle questions & options on replay
        quizData = shuffleQuestionsAndOptions(ORIGINAL_QUIZ);
        currentQuestion = 0;
        score = 0;
        selectedOption = -1;
        resultsScreen.classList.remove('active');
        startScreen.classList.add('active');
        renderLeaderboard(leaderboardStart);
      }

      startBtn.addEventListener('click', startQuiz);
      nextBtn.addEventListener('click', nextQuestion);
      playAgainBtn.addEventListener('click', startQuiz);
      saveScoreBtn.addEventListener('click', ()=>{
        const name = window.prompt('Enter display name (optional):') || 'Anonymous';
        saveToLeaderboard(name, score, quizData.length);
        renderLeaderboard(leaderboardResults);
        renderLeaderboard(leaderboardStart);
        alert('Saved to leaderboard');
      });

      // initial leaderboard render
      renderLeaderboard(leaderboardStart);

      // expose some functions if needed for debugging
      window.__quiz = { startQuiz, restartQuiz, getState: ()=>({ quizData, currentQuestion, score }) };
    })();
  </script>
</body>
</html>
